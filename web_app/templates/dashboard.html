{% extends "bootstrap_5_layout.html" %}
{% set active_page = "dashboard" %}

{% block content %}

    <h2>Going Out Dashboard</h2>

    <div id="chart-container" height="700px"></div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript">

        console.log("DASHBOARD...")

        // use data from the router!
        //var entries = '{{ entries }}'
        var frequencies = JSON.parse('{{ frequencies | tojson }}')
        var clubList = JSON.parse('{{ clubList | tojson }}')
        var yearList = JSON.parse('{{ yearList | tojson }}')
        console.log(clubList)
        console.log(frequencies)
        console.log(yearList)
        //var stockData = JSON.parse('{{ data }}')
        //var stockData = '{{ data }}'
        //var data = JSON.parse('{{entries | tojson}}') // https://stackoverflow.com/a/45132694/670433
        //console.log(data)

        //var tsd = stockData["Time Series (Daily)"]
        //var dates = Object.keys(tsd)
        //var dailyPrices = Object.values(tsd)
        //var clubs = data.map(obj => obj["Club"])
        //var years = data.map(obj => obj["Year"])

        // visualize the data
        // see: https://plotly.com/javascript/line-charts/
        var series =
          {
              x: clubList,
              y: frequencies,
              type: 'bar'
          }
        var chartData = [series]
        var layout = {
            title: "Summarized Data: ",
            height: 600
        }
        //Plotly.newPlot("chart-container", data, layout, {responsive: true})
        Plotly.newPlot("chart-container", chartData, layout)

    </script>

{% endblock %}
